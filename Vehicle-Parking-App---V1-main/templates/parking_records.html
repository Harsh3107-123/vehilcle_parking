{% extends 'layout.html' %}
{% block title %}
<title>Booking History</title>
{% endblock %}

{% block content %}
<div class="my_class">
<h1 class="text-center mb-4 text-primary"><i class="fas fa-clipboard-list"></i>Parking_record</h1>

<table class="table table-bordered border-primary">
    <thead>
        <tr>
            <th scope="col">Username</th>
            <th scope="col">Booking Time</th>
            <th scope="col">Park-in Time</th>
            <th scope="col">Park-out Time</th>
            <th scope="col">Duration from booking(in hour)</th>
            <th scope="col">Status</th>
        </tr>
    </thead>
    <tbody>
        {% for booking in bookings %}
        <tr>
            <td>{{ booking.user.full_name }}</td>
            <td>{{ booking.start_time.strftime('%d-%m-%Y %H:%M:%S') }}</td>

            <td>
                {% if booking.parkin_time %}
                {{ booking.parkin_time.strftime('%d-%m-%Y %H:%M:%S') }}
                {% else %}
                -
                {% endif %}
            </td>

            <td>
                {% if booking.parkout_time %}
                {{ booking.parkout_time.strftime('%d-%m-%Y %H:%M:%S') }}
                {% else %}
                -
                {% endif %}
            </td>

            <td>
            {% if booking.start_time and booking.parkout_time %}
            {% set duration = (booking.parkout_time - booking.start_time).total_seconds() / 3600%}
            {{'%.4f' % duration}}
            {% else %}
            -
            {% endif %}
            </td>

            <td>
                {% if booking.status == 'B' and booking.parkin_time %}
                Parked In
                {% elif booking.status == 'B' %}
                Booked
                {% elif booking.status == 'H' %}
                History
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}
{% block style %}
<style>
    .my_class {
        margin: 20px;
    }
</style>
{% endblock %}