{% extends 'layout.html' %}
{% block title %}
<title>parking_lot</title>{% endblock %}

{% block content %}
<div class="my_class">
<h1 class="text-center mb-4 text-primary"><i class="fas fa-square-parking"></i>arking_lot</h1>

<table class="table table-bordered border-primary">
    <thead>
        <tr>
            <th scope="col">Prime Location Name</th>
            <th scope="col">Available</th>
            <th scope="col">Price per Hour</th>
            <th scope="col">Address</th>
            <th scope="col">Pincode</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for parking_lot in parking_lots %}
        <tr>
            <td>{{ parking_lot.prime_location_name }}</td>
            {% set occupied = parking_lot.parking_spots | selectattr('user_id') | list %}
            <td>{{ parking_lot.maximum_number_of_spots - (occupied | length ) }}</td>
            <td>{{ parking_lot.price }}</td>
            <td>{{ parking_lot.address }}</td>
            <td>{{ parking_lot.pincode }}</td>
            <td>
                <form method="post" action="{{url_for('book_parking_spot',lot_id=parking_lot.id)}}">
                    <button class="btn btn-info"><i class="fa-solid fa-square-parking"></i> Book Spot</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% endblock %}
{% block style %}
<style>
    .my_class {
        margin: 20px;
    }
</style>
{% endblock %}